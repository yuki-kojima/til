# 7/15

## Object.is

jest の公式ドキュメントを読んでいて、 `toBe` マッチャーは `Object.is` で判定しているということを知った。

[`Object.is`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/is) は2つの値が同一値であるかどうかを判定するもの。
しかし、`==` 演算子とも `===` 演算子とも異なるとのこと。

`==` 演算子は値の比較の際に暗黙的な型変換を行うので言わずもがなという感じ。

`===` に関しては、符号付きの `0` と `NaN` の扱いが異なる。
`===` は `+0` と `-0` を同じものとして扱い、 `NaN` は異なるものとして扱う。
`Object.is` は `+0` と `-0` を違うものとして扱い、 `NaN` は同じものとして扱う。

```
console.log(Object.is(+0, -0));
// -> false

console.log(+0 === -0);
// -> true

console.log(Object.is(NaN, NaN));
// -> true

console.log(NaN === NaN);
// -> false
```

## jest の実行順序

jest は実際にテストを実行する前に、全テストファイル内の 全ての `describe` を実行する。
そのためテストが依存するデータのセットアップ/リセットは `describe` では行わず、`BeforeEach` / `BeforeAll` / `AfterEach` / `AfterAll` で行う必要がある。

大雑把なイメージだと、`describe` -> `BeforeAll` -> `BeforeEach` -> `test` -> `AfterEach` -> `AfterAll` の順。